<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecole Directe Badge Bypass</title>
    <link rel="icon" href="images/logo3test.svg" type="image/svg+xml">
    <link type="text/css" rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#f4f5f8" />
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3LVTY5N4B1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-3LVTY5N4B1');
    </script>

</head>
<!-- top bar grise sur iphone plus gros logo iphone  -->

<body>
    <div id="background" class="background">
        <header>
            <div onclick="redirecttogif()" class="container">
                <div class="logo">
                    <img src="images/logo.svg" alt="logo">
                </div>
                <div class="title">
                    <h1>Ecole Directe Badge Bypass</h1>
                </div>
            </div>

        </header>
        <div class="loader">
            <img src="images/logo.svg" alt="logo">
        </div>
        <div class="content">
            <div class="popup" id="container">
                <div class="padding" style="display: block;">
                    <p class="popuptext">Nouvelle mise √† jour üéâ: Beaucoup de nouveaut√©es ont √©t√© ajout√©es ! :
                    <ul>
                        <li>Vos
                            param√®tres sont maintenant sauvegard√©s automatiquement.</li>
                        <li> Vous pouvez maintenant redimentionner
                            votre photo directement sur le site</li>
                        <li>Un menu FAQ a √©t√© ajout√©.</li>
                        <li>Une protection de fermeture du badge √† √©t√© ajout√©
                            <strong style="color:red">(maintenant il faut double cliquer sur la croix pour sortir).
                        </li>
                        <li> Si vous aviez cr√©√© un raccourci sur votre √©cran d'acceuil vous devez supprimer l'ancien
                            raccourci et en cr√©er un nouveau √† cause de la nouvelle mise √† jour</strong></li>
                        <li> Votre badge restera toujours en
                            mode vertical.</li>
                        <li>L'interface √† √©t√© am√©lior√©e</li>
                        <li>Un bouton r√©initialiser √† √©t√© ajout√©</li>
                        <li> Le site √† chang√© d'url. Maintenant c'est ed-badge-bypass.fr</li>
                        <li>Diverses am√©liorations et r√©glages de bugs ont √©t√© apport√©es</li>
                    </ul>
                    </p>
                    <button onclick="hide()" class="popupclose">Ok ! (Fermer)</button>
                </div>
            </div>

            <div id="faq" class="faq-menu">
                <div class="padding" style="display: block">
                    <button class="toggle-faq-button" onclick="toggleFaq()">
                        <div class="faq-button-content">
                            <p><strong style="color: red;">A lire imp√©rativement ‚ö†Ô∏è:</strong> Comment utiliser Ecole
                                Directe Badge Bypass ?
                            </p>
                            <img src="images/Sharp_arrow.svg" class="arrow-icon"></img>
                        </div>
                    </button>
                    <div class="faq-content" style="max-height: 0;">
                        <div class="padding" style="display: block">
                            <h2>FAQ - Comment utiliser Ecole Directe Badge Bypass correctement ?</h2>
                            <ul>
                                <li><strong>Q :</strong> A quoi sa sert ?</li>
                                <li><strong>R :</strong> Ce site internet vous permet de <strong>cr√©er un badge Ecole
                                        Directe Personnalis√©</strong> si √©cole directe ne fonctionne pas par exemple.
                                    L'utilisation que vous en faites n'engages que
                                    vous
                                    et ne me regarde pas</li>
                                <br>
                                <li><strong>Q :</strong> Ceci permet il de remplacer un badge √©cole directe classique ?
                                </li>
                                <li><strong>R :</strong> <strong>Non.</strong> L'utilisation que vous faites de ce
                                    service n'engage que vous</li>
                                <br>
                                <li><strong>Q :</strong> Comment l'utiliser ?</li>
                                <li><strong>R :</strong> <strong>Remplissez les champs avec vos informations, puis
                                        cliquez sur
                                        "g√©n√©rer et afficher en plein √©cran"</strong> pour afficher votre badge comme
                                    sur √©cole
                                    directe.</li>
                                <br>
                                <li><strong>Q :</strong> Comment sortir du mode plein √©cran ?</li>
                                <li><strong>R :</strong> Pour sortir du mode plein √©cran vous devez <strong>appuyer 2
                                        fois sur la croix en
                                        haut √†
                                        droite</strong></li>
                                <br>
                                <li><strong>Q :</strong> Sa ne marche pas sur mon iPhone ! </li>
                                <li><strong>R :</strong> Le mode plein √©cran n'est pas disponible sur iPhone √† cause
                                    d'une
                                    limitation d'iOS. Pour contourner ce probl√®me, vous pouvez <strong>ajouter le site √†
                                        votre √©cran d'accueil</strong> en suivant les √©tapes d√©crites plus bas</li>
                                <br>
                                <li><strong>Q :</strong> Comment r√©cup√©rer ma photo Ecole Directe ?</li>
                                <li><strong>R :</strong> Vous pouvez r√©cup√©rer votre photo Ecole Directe en
                                    <strong>prenant
                                        une capture d'√©cran de votre badge et en rognant la capture d'√©cran autour de
                                        votre
                                        photo.</strong> Si vous avez d√©ja r√©cup√©rer la photo autrement vous pouvez
                                    l'utiliser. Sinon vous pouvez utiliser un selfie ou laisser sans photo mais cela
                                    sera
                                    moins ressemblant au vrai badge. Un syst√®me sera impl√©ment√© dans le futur pour
                                    r√©cup√©re
                                    la photo automatiquement
                                </li>
                                <br>
                                <li><strong>Q :</strong> Je ne trouve pas ma classe dans la liste !</li>
                                <li><strong>R :</strong> Si vous ne trouvez pas votre classe dans la liste, vous pouvez
                                    <strong>choisir "Classe non propos√©e ?" et √©crire votre classe</strong> dans le
                                    champ
                                    qui apparaitra.
                                </li>
                                <br>
                                <li><strong>Q :</strong> Est ce que le code barre marche ?</li>
                                <li><strong>R :</strong> <strong>Non</strong>, le code barre ne marche pas. Il est juste
                                    l√†
                                    pour faire plus r√©aliste. Il n'est pas pr√©vu d'en faire un fonctionnel</li>
                                <br>
                                <li><strong>Q :</strong> Est ce que je peux utiliser ce badge pour aller au self ?</li>
                                <li><strong>R :</strong> <strong>Non</strong>, ce badge n'est pas fonctionnel. Il est
                                    juste
                                    l√† pour faire plus r√©aliste. Il n'est pas pr√©vu d'en faire un fonctionnel</li>
                                <br>
                                <li><strong>Q :</strong> Est ce que je dois r√©entrer mes informations √† chaque fois ?
                                </li>
                                <li><strong>R :</strong> <strong>Non</strong>, vos informations sont sauvegard√©es
                                    automatiquement, m√™me votre photo. Vous pouvez les modifier √† tout moment</li>
                                <br>
                                <li><strong>Q :</strong> Est-ce s√©curis√© ?</li>
                                <li><strong>R :</strong> <strong>Oui</strong>, vos informations sont sauvegard√©es dans
                                    votre
                                    navigateur et ne sont pas envoy√©es sur un serveur. Vous pouvez v√©rifier en regardant
                                    le
                                    code source de la page</li>
                                <!-- Ajoutez d'autres questions et r√©ponses ici -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <button id="openModalBtn" class="share">Partager <img src="shareicn.svg"></button>
            </div>
            <div class="badgeconfig">
                <div class="padding">
                    <h2>Configurer votre badge:</h2>
                    <label for="prenom">Pr√©nom:</label>
                    <input oninput="update()" type="text" id="prenom" name="prenom" placeholder="Pr√©nom">
                    <label for="nom">NOM:</label>
                    <input oninput="update()" type="text" id="nom" name="nom" placeholder="NOM">
                    <label for="classe">Classe:</label>
                    <select oninput="update()" name="classe" id="classe">
                        <option value="Classe">Choisir sa classe</option>
                        <option value="custom">Classe non propos√©e ?</option>
                        <option value="Sixi√®me 1">Sixi√®me 1</option>
                        <option value="Sixi√®me 2">Sixi√®me 2</option>
                        <option value="Sixi√®me 3">Sixi√®me 3</option>
                        <option value="Sixi√®me 4">Sixi√®me 4</option>
                        <option value="Sixi√®me 5">Sixi√®me 5</option>
                        <option value="Cinqui√®me 1">Cinqui√®me 1</option>
                        <option value="Cinqui√®me 2">Cinqui√®me 2</option>
                        <option value="Cinqui√®me 3">Cinqui√®me 3</option>
                        <option value="Cinqui√®me 4">Cinqui√®me 4</option>
                        <option value="Cinqui√®me 5">Cinqui√®me 5</option>
                        <option value="Quatri√®me 1">Quatri√®me 1</option>
                        <option value="Quatri√®me 2">Quatri√®me 2</option>
                        <option value="Quatri√®me 3">Quatri√®me 3</option>
                        <option value="Quatri√®me 4">Quatri√®me 4</option>
                        <option value="Quatri√®me 5">Quatri√®me 5</option>
                        <option value="Troisi√®me 1">Troisi√®me 1</option>
                        <option value="Troisi√®me 2">Troisi√®me 2</option>
                        <option value="Troisi√®me 3">Troisi√®me 3</option>
                        <option value="Troisi√®me 4">Troisi√®me 4</option>
                        <option value="Troisi√®me 5">Troisi√®me 5</option>
                        <option value="Seconde 1">Seconde 1</option>
                        <option value="Seconde 2">Seconde 2</option>
                        <option value="Seconde 3">Seconde 3</option>
                        <option value="Seconde 4">Seconde 4</option>
                        <option value="Seconde 5">Seconde 5</option>
                        <option value="Seconde 6">Seconde 6</option>
                        <option value="Seconde 7">Seconde 7</option>
                        <option value="Seconde 8">Seconde 8</option>
                        <option value="Premi√®re G1">Premi√®re G1</option>
                        <option value="Premi√®re G2">Premi√®re G2</option>
                        <option value="Premi√®re G3">Premi√®re G3</option>
                        <option value="Premi√®re G4">Premi√®re G4</option>
                        <option value="Premi√®re G5">Premi√®re G5</option>
                        <option value="Premi√®re G6">Premi√®re G6</option>
                        <option value="Premi√®re G7">Premi√®re G7</option>
                        <option value="Premi√®re G8">Premi√®re G8</option>
                        <option value="Premi√®re G9">Premi√®re G9</option>
                        <option value="Premi√®re STI2D">Premi√®re STI2D</option>
                        <option value="Terminale G1">Terminale G1</option>
                        <option value="Terminale G2">Terminale G2</option>
                        <option value="Terminale G3">Terminale G3</option>
                        <option value="Terminale G4">Terminale G4</option>
                        <option value="Terminale G5">Terminale G5</option>
                        <option value="Terminale G6">Terminale G6</option>
                        <option value="Terminale G7">Terminale G7</option>
                        <option value="Terminale G8">Terminale G8</option>
                        <option value="Terminale G9">Terminale G9</option>
                        <option value="Terminale STI2D">Terminale STI2D</option>
                    </select>
                    <input oninput="update()" type="text" id="customclasse" name="customclasse"
                        placeholder="Classe personnalis√©e...">
                    <label class="labeljours" for="annee">Cocher le(s) jour(s) d‚Äôinscription au self:</label>
                    <div class="checkbox">
                        <div class="gab">
                            <input oninput="update()" type="checkbox" id="lundi" name="lundi">
                            <label for="lundi">Lundi</label>
                        </div>
                        <div class="gab"><input oninput="update()" type="checkbox" id="mardi" name="mardi">
                            <label for="mardi">Mardi</label>
                        </div>
                        <div class="gab"><input oninput="update()" type="checkbox" id="mercredi" name="mercredi">
                            <label for="mercredi">Mercredi</label>
                        </div>
                        <div class="gab"><input oninput="update()" type="checkbox" id="jeudi" name="jeudi">
                            <label for="jeudi">Jeudi</label>
                        </div>
                        <div class="gab"><input oninput="update()" type="checkbox" id="vendredi" name="vendredi">
                            <label for="vendredi">Vendredi</label>
                        </div>
                    </div>
                    <label id="item" for="date">Photo :</label>
                    <div class="importwarper"> <button style="display:block;width:100%;" class="importbtn"><input
                                oninput="update()" type="file" id="photo" name="photo" accept="image/*">Importer<img
                                class="importimg" src="images/import.svg"></button></div>
                                                    <!-- <p>Ou se connecter √† Ecole Directe pour r√©cup√©rer la photo automatiquement :</p>
                                                                <div class="ecoledirecte">
                                                                    <input type="text" id="identifiant" name="identifiant" placeholder="Identifiant">
                                                                    <input type="password" id="motdepasse" name="motdepasse" placeholder="Mot de passe">
                                                                    <button onclick="login()" class="submit" type="submit">R√©cup√©rer la photo</button>
                                                                </div> -->
                    <div id="cropContainer" style="display: none;grid-column: 1/3;">
                        <div id="upload-demo"></div>
                        <button style="display: block;width: 100%;min-width: auto;margin-bottom: 10px;max-width: 270px;"
                            id="cropImageBtn">Ok (rogner)</button>
                        <button style="display: block;width: 100%;min-width: auto;max-width: 270px;"
                            id="cancelCropBtn">Annuler (ne pas rogner appliquer tel quel)</button>
                    </div>
                    <button onclick="openFullscreen();" class="submit" type="submit">G√©n√©rer et afficher en plein
                        √©cran<img class="fullscreen" src="images/fullscreen.svg"></button>
                </div>
            </div>
            <div class="iphonewarning">
                <p>Le fullscreen n'est pas disponible sur iPhone √† cause d'une limitation d'iOS. Pour contourner ce
                    probl√®me, vous pouvez ajouter le site √† votre √©cran d'accueil.</p>
                <ul>
                    <li>Cliquez sur partager</li>
                    <li>Cliquez sur ajouter √† l'√©cran d'accueil</li>
                    <li>Ouvrir le site depuis l'√©cran d'acceuil</li>
                    <li>Enfin remplir √† nouveau les informations et cliquez sur g√©n√©rer</li>
                </ul>
                </p>
            </div>
            <div class="badgepreview">
                <div class="header">
                    <h1 class="headerh1">Badge</h1>
                    <img id="closeButton" src="images/close.svg" alt="close">
                </div>
                <div class="maininfos">
                    <img id="photopreview" class="photo" src="images/eleve-h.png" alt="photo">
                    <div class="infos">
                        <h2 id="prenometnom">Pr√©nom NOM</h2>
                        <h3 id="classepreview">Classe</h3>
                    </div>

                </div>
                <div class="codebar">
                    <img src="images/codebar.svg" alt="codebar">
                </div>
                <div class="regime">
                    <h2 id="regime">R√©gime : REGIME X JOURS</h2>
                </div>
                <div class="repas">
                    <div class="midi">
                        <img class="midiimg" src="images/restaurant-sharp.svg" alt="repas">
                        <div class="jours">
                            <h2>Midi (semaine type)</h2>
                            <div class="jourslist">
                                <div>L<img id="previewlundi" class="yes" src="images/no.svg"></div>
                                <div>M<img id="previewmardi" class="yes" src="images/no.svg"></div>
                                <div>M<img id="previewmercredi" class="yes" src="images/no.svg"></div>
                                <div>J<img id="previewjeudi" class="yes" src="images/no.svg"></div>
                                <div>V<img id="previewvendredi" class="yes" src="images/no.svg"></div>
                                <div>S<img id="previewsamedi" class="yes" src="images/no.svg"></div>
                                <div>D<img id="previewdimanche" class="yes" src="images/no.svg"></div>
                            </div>
                        </div>
                    </div>
                    <div class="midi">
                        <img class="midiimg" src="images/restaurant-sharp.svg" alt="repas">
                        <div class="jours">
                            <h2>Soir (semaine type)</h2>
                            <div class="jourslist">
                                <div>L<img class="yes" src="images/no.svg"></div>
                                <div>M<img class="yes" src="images/no.svg"></div>
                                <div>M<img class="yes" src="images/no.svg"></div>
                                <div>J<img class="yes" src="images/no.svg"></div>
                                <div>V<img class="yes" src="images/no.svg"></div>
                                <div>S<img class="yes" src="images/no.svg"></div>
                                <div>D<img class="yes" src="images/no.svg"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="date">
                    <p id="date">jour de la semaine jour mois ann√©e - heures:minutes:secondes</p>
                </div>
            </div>
            <div id="myModal" class="modal">
                <!-- Modal content -->
                <div class="modal-content">
                    <span class="close" id="closeModalBtn">&times;</span>
                    <h2>Partager: Merci de partager notre site !</h2>
                    <div class="input-container">
                        <input type="text" id="websiteLink" readonly value="https://ed-badge-bypass.fr">
                        <button id="copyButton"><i class="far fa-copy"></i></button>
                    </div>
                    <div id="qrCodeContainer">
                        <!-- SVG QR Code image goes here -->
                        <img src="share.svg" alt="QR Code">
                    </div>
                </div>
            </div>
            <div id="resetdiv" style="margin: auto;width: 200px;margin-top:40px"><button onclick="reset()"
                    class="reset">R√©initialiser<img src="images/reset.svg"> </button></div>
        </div>
        <div class="footer">
            <p class="disclaimer">‚ö†Ô∏è Vous √™tes le seul reponsable de l'utilisation que vous faites de
                ce service. En continuant vous acceptez ces conditions</p>
            <p class="credits">¬©2023 EDBadgeBypass | Tout Droits R√©serv√©s</p>
        </div>
        <script src="croppie.js"></script>
        <link rel="stylesheet" href="croppie.css" />
        <script>

                // function login() {
                //         identifiant = document.getElementById("identifiant").value;
                //         motdepasse = document.getElementById("motdepasse").value;
                //         console.log(identifiant);
                //         console.log(motdepasse);
                //         var request = new XMLHttpRequest();
                //         request.open('POST', 'https://api.ecoledirecte.com/v3/login.awp', true);
                //         request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
                //         request.send('data={"identifiant": "' + identifiant + '","motdepasse": "' + motdepasse + '" , "isRelogin": false, "uuid": ""}');
                //         request.onload = function () {
                //             var data = JSON.parse(this.response);
                //             if (data.code === 250) {
                //                 console.log("double auth qcm")
                //                 var token = data.token;
                //                 var request2 = new XMLHttpRequest();
                //                 request2.open('GET', 'https://api.ecoledirecte.com/v3/connexion/doubleauth.awp', true);
                //                 request2.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
                //                 request2.send();
                //                 request2.onload = function () {
                //                     var data2 = JSON.parse(this.response);
                //                     console.log(data2);
                //                 }
                //             }
                //         };
                //     }

                            // async function login() {
                            //         const identifiant = document.getElementById("identifiant").value;
                            //         const motdepasse = document.getElementById("motdepasse").value;

                            //         const data = {
                            //             identifiant: identifiant,
                            //             motdepasse: motdepasse,
                            //             isRelogin: false,
                            //             uuid: ""
                            //         };

                            //         try {
                            //             const response = await fetch('https://api.ecoledirecte.com/v3/login.awp', {
                            //                 method: 'POST',
                            //                 headers: {
                            //                     'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
                            //                 },
                            //                 body: JSON.stringify(data)
                            //             });

                            //             const result = await response.json();

                            //             if (result.code === 200) {
                            //                 const photoUrl = result.data.accounts[0].profile.photo;
                            //                 window.location.href = "https:" + photoUrl;
                            //             } else {
                            //                 alert('Erreur: ' + result.message);
                            //             }
                            //         } catch (error) {
                            //             console.error('Erreur:', error);
                            //         }
                            //     }



            var $uploadCrop;
            var rawImg;

            function readFile(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        rawImg = e.target.result;
                        showCropContainer();
                    }
                    reader.readAsDataURL(input.files[0]);
                } else {
                    alert("Sorry - your browser doesn't support the FileReader API");
                }
            }

            function showCropContainer() {
                document.getElementById("cropContainer").style.display = "block";
                $uploadCrop = new Croppie(document.getElementById('upload-demo'), {
                    viewport: {
                        width: 150,
                        height: 150,
                        type: 'circle',
                    },
                    boundary: {
                        width: 250,
                        height: 250
                    },
                    enableExif: true
                });
                $uploadCrop.bind({
                    url: rawImg
                });
            }

            document.getElementById('photo').addEventListener('change', function () {
                try { $uploadCrop.destroy(); }
                catch (error) { }
                readFile(this);
            });

            document.getElementById('cropImageBtn').addEventListener('click', function () {
                $uploadCrop.result('base64').then(function (resp) {
                    document.getElementById("photopreview").src = resp;
                    localStorage.setItem('photo', resp);
                    document.getElementById('cropContainer').style.display = 'none';
                    document.getElementById('photo').value = ''; // Clear input
                    $uploadCrop.destroy();
                });
            });

            document.getElementById('cancelCropBtn').addEventListener('click', function () {
                $uploadCrop.destroy();
                document.getElementById('cropContainer').style.display = 'none';
                document.getElementById('photo').value = ''; // Clear input
            });
        </script>
        <style id="fixlandscape">
            @media screen and (orientation: landscape) {
                html:fullscreen .badgepreview {
                    transform: rotate(90deg);
                    transform-origin: center center;
                    width: 100vh;
                    height: 100vw;
                }

            }
        </style>
        <script>
            // Get the modal and buttons
            const modal = document.getElementById("myModal");
            const openModalBtn = document.getElementById("openModalBtn");
            const closeModalBtn = document.getElementById("closeModalBtn");
            const copyButton = document.getElementById("copyButton");
            const websiteLink = document.getElementById("websiteLink");

            // Open the modal
            openModalBtn.addEventListener("click", () => {
                window.scrollTo({ top: 0 })
                modal.style.display = "block";
                setTimeout(() => {
                    modal.classList.add("open");
                    //disable scrolling body overflow hidden when modal is open
                    document.body.style.overflow = "hidden";
                }, 10); // Delay adding the "open" class for the animation to work
            });

            // Close the modal when clicking the close button
            closeModalBtn.addEventListener("click", () => {
                modal.classList.add("close");
                setTimeout(() => {
                    modal.style.display = "none";
                    modal.classList.remove("close");
                    modal.classList.remove("open"); // Remove the "open" class after the animation
                    //enable scrolling body overflow auto when modal is closed
                    document.body.style.overflow = "auto";
                }, 300); // Delay the removal of "close" class for the animation to finish
            });

            // Close the modal when clicking outside of it
            window.addEventListener("click", (event) => {
                if (event.target == modal) {
                    modal.classList.add("close");
                    setTimeout(() => {
                        modal.style.display = "none";
                        modal.classList.remove("close");
                        modal.classList.remove("open"); // Remove the "open" class after the animation
                        //enable scrolling body overflow auto when modal is closed
                        document.body.style.overflow = "auto";
                    }, 300); // Delay the removal of "close" class for the animation to finish
                }
            });

            // Copy the website link to the clipboard
            copyButton.addEventListener("click", () => {
                websiteLink.select();
                document.execCommand("copy");
                if (navigator.share) {
                    navigator
                        .share({
                            title: "Partager le lien du site",
                            url: websiteLink.value,
                        })
                        .then(() => {
                            console.log("Thanks for sharing!");
                        })
                        .catch(console.error);
                }
            });

            function redirecttogif() {
                window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
            }

            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            }
            else {
                //cancel this @media screen and (orientation: landscape) {     html:fullscreen .badgepreview {         transform: rotate(90deg);         transform-origin: center center;          width: 100vh;         height: 100vw;     }      }
                document.getElementById("fixlandscape").innerHTML = "";
            }

            //if scroll show the loader again
            var prevWidth = window.innerWidth;

            localStorage.getItem('hide') === 'true' ? document.getElementById("container").style.display = "none" : document.getElementById("container").style.display = "block";

            function reset() {
                localStorage.clear();
                location.reload();
            }

            setTimeout(function () {
                document.querySelector('.loader').style.opacity = "0";
                setTimeout(function () {
                    document.querySelector('.loader').style.display = "none";
                }, 500);
            }, 500);

            function toggleFaq() {
                var faqContent = document.querySelector('.faq-content');
                var arrowIcon = document.querySelector('.arrow-icon');

                //get the height of the element's inner content, because it can change depending on user screen width so get the height of the inner content everytime the button is clicked
                if (faqContent.style.maxHeight === '0px' || faqContent.style.maxHeight === '') {
                    console.log("open");
                    faqContent.style.maxHeight = "3000px";
                    arrowIcon.style.transform = 'rotate(180deg)'; // Rotation de 90 degr√©s lorsque la FAQ est ouverte
                } else {
                    console.log("close");
                    faqContent.style.maxHeight = '0px';
                    arrowIcon.style.transform = 'rotate(0deg)'; // Rotation de 0 degr√© lorsque la FAQ est ferm√©e
                }
            }

            function hide() {
                var popup = document.getElementById("container");
                let root = document.documentElement;
                root.style.setProperty('--popup-height', popup.offsetHeight + "px");
                console.log(popup.offsetHeight);
                popup.classList.add("popup-closing");

                // Wait for the transition to complete before hiding the popup
                setTimeout(function () {
                    popup.style.display = "none";
                }, 1000);
                // Adjust the time to match your CSS transition time
                localStorage.setItem('hide', true);
            }

            //if the user is on iphone, display a warning
            if (navigator.userAgent.indexOf('iPhone') != -1) {
                document.getElementsByClassName("iphonewarning")[0].style.display = "block";
                document.getElementsByClassName("headerh1")[0].style.margin = "auto";
                document.getElementsByClassName("midiimg")[0].src = "images/restaurant-iphone.svg";
                document.getElementsByClassName("midiimg")[1].src = "images/restaurant-iphone.svg";
            }
            function affichZero(nombre) {

                return nombre < 10 ? '0' + nombre : nombre;
            }
            function dateEtHeure() {
                let cejour = new Date();
                let options = { weekday: "long", year: "numeric", month: "long", day: "numeric", };
                let date = cejour.toLocaleDateString("fr-FR", options);

                const infos = new Date();
                document.getElementById('date').innerHTML = date + " " + "-" + ' ' + affichZero(infos.getHours()) + ':' + affichZero(infos.getMinutes()) + ":" + affichZero(infos.getSeconds());
            }


            window.onload = function () {
                document.getElementById("prenom").value = localStorage.getItem('prenom') || '';
                document.getElementById("nom").value = localStorage.getItem('nom') || '';
                document.getElementById("classe").value = localStorage.getItem('classe') || 'Classe';
                document.getElementById("customclasse").value = localStorage.getItem('customclasse') || '';
                document.getElementById("lundi").checked = localStorage.getItem('lundi') === 'true';
                document.getElementById("mardi").checked = localStorage.getItem('mardi') === 'true';
                document.getElementById("mercredi").checked = localStorage.getItem('mercredi') === 'true';
                document.getElementById("jeudi").checked = localStorage.getItem('jeudi') === 'true';
                document.getElementById("vendredi").checked = localStorage.getItem('vendredi') === 'true';
                document.getElementById("photopreview").src = localStorage.getItem('photo') || 'images/eleve-h.png';
                update();
                setInterval("dateEtHeure()", 100);
            };
            var prenom = document.getElementById("prenom").value.charAt(0).toUpperCase() + document.getElementById("prenom").value.slice(1);
            document.getElementById("prenom").value = prenom;
            var nom = document.getElementById("nom").value.toUpperCase();
            document.getElementById("nom").value = nom;
            var classe = document.getElementById("classe").value;
            if (classe == "custom") {
                document.getElementById("customclasse").style.display = "block";
                classe = document.getElementById("customclasse").value;
            }
            else {
                document.getElementById("customclasse").style.display = "none";
            }
            var lundi = document.getElementById("lundi").checked;
            var mardi = document.getElementById("mardi").checked;
            var mercredi = document.getElementById("mercredi").checked;
            var jeudi = document.getElementById("jeudi").checked;
            var vendredi = document.getElementById("vendredi").checked;

            function update() {
                nbjoursexterne = 0;
                var prenom = document.getElementById("prenom").value.charAt(0).toUpperCase() + document.getElementById("prenom").value.slice(1);
                document.getElementById("prenom").value = prenom;
                var nom = document.getElementById("nom").value.toUpperCase();
                document.getElementById("nom").value = nom;
                var classe = document.getElementById("classe").value;
                if (classe == "custom") {
                    document.getElementById("customclasse").style.display = "block";
                    classe = document.getElementById("customclasse").value;
                }
                else {
                    document.getElementById("customclasse").style.display = "none";
                }
                var lundi = document.getElementById("lundi").checked;
                var mardi = document.getElementById("mardi").checked;
                var mercredi = document.getElementById("mercredi").checked;
                var jeudi = document.getElementById("jeudi").checked;
                var vendredi = document.getElementById("vendredi").checked;
                const [file] = document.getElementById("photo").files;
                if (prenom == "") {
                    prenom = "Pr√©nom";
                }
                if (nom == "") {
                    nom = "NOM";
                }
                if (classe == "") {
                    classe = "Classe";
                }
                document.getElementById("prenometnom").innerHTML = prenom + " " + nom;
                try {
                    document.getElementById("photopreview").src = URL.createObjectURL(file);
                    //convert the image to base64
                    var reader = new FileReader();
                    reader.readAsDataURL(file);
                    reader.onload = function () {
                        var base64 = reader.result;
                        localStorage.setItem('photo', base64);
                    };

                } catch (error) { console.log("pas de photo") }
                document.getElementById("classepreview").innerHTML = classe;
                if (lundi == true) {
                    console.log("lundi");
                    document.getElementById("previewlundi").src = "images/yes.svg";
                    nbjoursexterne = nbjoursexterne + 1;
                } else {
                    document.getElementById("previewlundi").src = "images/no.svg";
                }
                if (mardi == true) {
                    console.log("mardi");
                    document.getElementById("previewmardi").src = "images/yes.svg";
                    nbjoursexterne = nbjoursexterne + 1;
                } else {
                    document.getElementById("previewmardi").src = "images/no.svg";
                }
                if (mercredi == true) {
                    console.log("mercredi");
                    document.getElementById("previewmercredi").src = "images/yes.svg";
                    nbjoursexterne = nbjoursexterne + 1;
                } else {
                    document.getElementById("previewmercredi").src = "images/no.svg";
                }
                if (jeudi == true) {
                    console.log("jeudi");
                    document.getElementById("previewjeudi").src = "images/yes.svg";
                    nbjoursexterne = nbjoursexterne + 1;
                } else {
                    document.getElementById("previewjeudi").src = "images/no.svg";
                }
                if (vendredi == true) {
                    console.log("vendredi");
                    document.getElementById("previewvendredi").src = "images/yes.svg";
                    nbjoursexterne = nbjoursexterne + 1;
                } else {
                    document.getElementById("previewvendredi").src = "images/no.svg";
                }
                if (lundi == false && mardi == false && mercredi == false && jeudi == false && vendredi == false) { regime = "EXTERNE LIBRE" } else { regime = "DEMI PENSIONNAIRE " + nbjoursexterne + " JOURS" }
                document.getElementById("regime").innerHTML = "R√©gime : " + regime;

                localStorage.setItem('prenom', document.getElementById("prenom").value);
                localStorage.setItem('nom', document.getElementById("nom").value);
                localStorage.setItem('classe', document.getElementById("classe").value);
                localStorage.setItem('customclasse', document.getElementById("customclasse").value);
                localStorage.setItem('lundi', document.getElementById("lundi").checked);
                localStorage.setItem('mardi', document.getElementById("mardi").checked);
                localStorage.setItem('mercredi', document.getElementById("mercredi").checked);
                localStorage.setItem('jeudi', document.getElementById("jeudi").checked);
                localStorage.setItem('vendredi', document.getElementById("vendredi").checked);
            }

            function openFullscreen() {
                update();
                document.getElementById("cropContainer").style.display = "none";
                var elem = document.documentElement;
                document.body.scrollTop = 0; // For Safari
                document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
                //if the user is on iphone, add the class fullscreen to the preview
                if (navigator.userAgent.indexOf('iPhone') != -1) {
                    document.getElementsByClassName("badgepreview")[0].classList.add("fullscreenfixpreview");
                    document.getElementsByClassName("header")[0].classList.add("fullscreenfixheader");
                    document.getElementsByTagName("html")[0].classList.add("fullscreenfixhtml");
                    document.body.classList.add("fullscreenfixbody");
                    document.getElementsByClassName("iphonewarning")[0].style.display = "none";
                    document.getElementsByTagName("header")[0].classList.add("fullscreenheaderfix");
                    document.getElementsByClassName("footer")[0].classList.add("fullscreenfooterfix");
                    document.getElementsByClassName("badgeconfig")[0].classList.add("fullscreenbadgeconfigfix");
                    document.getElementsByClassName("faq-menu")[0].classList.add("fullscreenfaqmenufix");
                    document.getElementsByClassName("popup")[0].classList.add("fullscreenpopupfix");
                    document.getElementById("fixlandscape").innerHTML = "@media screen and (orientation: landscape) {.badgepreview {transform: rotate(90deg);transform-origin: center center; width: 100vh;height: 100vw;}}"
                    document.getElementById("resetdiv").classList.add("fullscreenresetfix");
                } else if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) {
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                }
            }

            let clickCount = 0;
            let lastClickTime = 0;
            const closeButton = document.getElementById("closeButton");

            // For desktop
            closeButton.addEventListener("click", checkDoubleClick);

            // For mobile
            closeButton.addEventListener("touchstart", handleTouchStart);

            function checkDoubleClick() {
                const currentTime = new Date().getTime();

                // Check if it's a double click (two clicks within 500 milliseconds)
                if (currentTime - lastClickTime < 500) {
                    closeFullscreen(); // Execute your function here
                    // Reset the click count
                    clickCount = 0;
                } else {
                    // It's a single click, update the last click time and increment the click count
                    lastClickTime = currentTime;
                    clickCount++;
                }

                // Adjust the maximum click count as needed (2 for a double click)
                if (clickCount >= 2) {
                    clickCount = 0; // Reset the click count if it exceeds 2
                }
            }

            function handleTouchStart(event) {
                event.preventDefault();
                const currentTime = new Date().getTime();

                // Check if it's a double tap (two taps within 500 milliseconds)
                if (currentTime - lastClickTime < 500) {
                    closeFullscreen(); // Execute your function here
                    // Reset the click count
                    clickCount = 0;
                } else {
                    // It's a single tap, update the last click time and increment the click count
                    lastClickTime = currentTime;
                    clickCount++;
                }

                // Adjust the maximum click count as needed (2 for a double tap)
                if (clickCount >= 2) {
                    clickCount = 0; // Reset the click count if it exceeds 2
                }
            }

            function closeFullscreen() {
                //if the user is on iphone, remove the class fullscreen to the preview
                if (navigator.userAgent.indexOf('iPhone') != -1) {
                    document.getElementsByClassName("badgepreview")[0].classList.remove("fullscreenfixpreview");
                    document.getElementsByClassName("header")[0].classList.remove("fullscreenfixheader");
                    document.getElementsByTagName("html")[0].classList.remove("fullscreenfixhtml");
                    document.body.classList.remove("fullscreenfixbody");
                    document.getElementsByClassName("iphonewarning")[0].style.display = "block";
                    document.getElementsByTagName("header")[0].classList.remove("fullscreenheaderfix");
                    document.getElementsByClassName("footer")[0].classList.remove("fullscreenfooterfix");
                    document.getElementsByClassName("badgeconfig")[0].classList.remove("fullscreenbadgeconfigfix");
                    document.getElementsByClassName("faq-menu")[0].classList.remove("fullscreenfaqmenufix");
                    document.getElementsByClassName("popup")[0].classList.remove("fullscreenpopupfix");
                    document.getElementById("fixlandscape").innerHTML = "";
                    document.getElementById("resetdiv").classList.remove("fullscreenresetfix");
                } else if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
            }
        </script>
    </div>
</body>

</html>